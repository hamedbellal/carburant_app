{% extends "base.html" %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <h1 class="text-center mb-4">ğŸ” Analyse des Prix du Carburant en France</h1>
        <p class="text-center lead">Consultez les prix des carburants en temps rÃ©el dans toute la France</p>
    </div>
</div>

<!-- Cartes de rÃ©sumÃ© -->
<div class="row mb-5">
    <div class="col-md-3 mb-3">
        <div class="card text-white bg-success h-100">
            <div class="card-body text-center">
                <h1 class="display-4">{{ total_stations }}</h1>
                <p class="card-text">Stations</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="card text-white bg-info h-100">
            <div class="card-body text-center">
                <h1 class="display-4">6</h1>
                <p class="card-text">Types de carburants</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="card text-white bg-warning h-100">
            <div class="card-body text-center">
                <h1 class="display-4">{{ total_departments }}</h1>
                <p class="card-text">DÃ©partements</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="card text-white bg-danger h-100">
            <div class="card-body text-center">
                <h1 class="display-4">{{ avg_price_gazole | round(3) }}â‚¬</h1>
                <p class="card-text">Prix moyen Gazole</p>
            </div>
        </div>
    </div>
</div>

<!-- Formulaire de recherche -->
<div class="card shadow">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0">ğŸ” Recherche avancÃ©e</h5>
    </div>
    <div class="card-body">
        <form action="/recherche" method="POST">
            <div class="row g-3">
                <div class="col-md-4">
                    <label for="ville" class="form-label">ğŸ™ï¸ Ville</label>
                    <input type="text" class="form-control" id="ville" name="ville" 
                           placeholder="Ex: Paris, Lyon, Marseille...">
                </div>
                
                <div class="col-md-4">
                    <label for="carburant" class="form-label">â›½ Type de carburant</label>
                    <select class="form-select" id="carburant" name="carburant">
                        <option value="">Tous les carburants</option>
                        <option value="Gazole">Gazole</option>
                        <option value="SP95">SP95</option>
                        <option value="SP98">SP98</option>
                        <option value="E10">E10</option>
                        <option value="E85">E85</option>
                        <option value="GPLc">GPLc</option>
                    </select>
                </div>

                <div class="col-md-4">
                    <label for="departement" class="form-label">ğŸ“ DÃ©partement</label>
                    <input type="text" class="form-control" id="departement" name="departement" 
                           placeholder="Ex: 75, 13, 69...">
                </div>
            </div>
            
            <div class="row g-3 mt-2">
                <div class="col-md-6">
                    <label for="prix_min" class="form-label">ğŸ’° Prix minimum</label>
                    <input type="number" step="0.001" class="form-control" id="prix_min" name="prix_min" 
                           placeholder="Ex: 1.50">
                </div>
                
                <div class="col-md-6">
                    <label for="prix_max" class="form-label">ğŸ’° Prix maximum</label>
                    <input type="number" step="0.001" class="form-control" id="prix_max" name="prix_max" 
                           placeholder="Ex: 2.00">
                </div>
            </div>
            
            <div class="mt-4 text-center">
                <button type="submit" class="btn btn-primary btn-lg">ğŸ” Lancer la recherche</button>
                <a href="/export-csv" class="btn btn-success btn-lg ms-2">ğŸ“¥ Export CSV complet</a>
                <a href="/statistiques" class="btn btn-info btn-lg ms-2">ğŸ“Š Voir les statistiques</a>
            </div>
        </form>
    </div>
</div>

<!-- Section informations -->
<div class="row mt-5">
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title">ğŸ“ˆ Ã€ propos des donnÃ©es</h5>
                <p class="card-text">Les donnÃ©es sont issues du flux instantanÃ© des prix des carburants 
                publiÃ© par le gouvernement franÃ§ais sur data.gouv.fr</p>
                <p class="card-text"><small class="text-muted">Mise Ã  jour automatique quotidienne</small></p>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title">â„¹ï¸ Comment utiliser</h5>
                <ul class="list-unstyled">
                    <li>âœ… Recherchez par ville, dÃ©partement ou carburant</li>
                    <li>âœ… Consultez les statistiques dÃ©taillÃ©es</li>
                    <li>âœ… Exportez les donnÃ©es en CSV</li>
                    <li>âœ… Visualisez les tendances de prix</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}